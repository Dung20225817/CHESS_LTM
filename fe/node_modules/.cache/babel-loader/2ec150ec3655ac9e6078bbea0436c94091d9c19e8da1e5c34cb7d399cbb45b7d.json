{"ast":null,"code":"var _jsxFileName = \"D:\\\\LTM\\\\CHESS\\\\fe\\\\src\\\\components\\\\Broad\\\\Board.tsx\",\n  _s = $RefreshSig$();\n// ...existing code...\nimport React, { useState, useMemo, useEffect, useCallback } from \"react\";\nimport { BoardGrid } from \"./BoardGrid\";\nimport { GameInfo } from \"./GameInfo\";\nimport { ConnectionStatus } from \"./ConnectionStatus\";\nimport useChessSocket from \"../context/useChessSocket\";\nimport { ChessRules } from \"./chessRules\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Board({\n  roomId\n}) {\n  _s();\n  const [fen, setFen] = useState(\"................................................................\");\n  const [turn, setTurn] = useState(\"white\");\n  const [gameOver, setGameOver] = useState(null);\n  const [reason, setReason] = useState(undefined);\n  const [selectedFrom, setSelectedFrom] = useState(null);\n  const [validMoves, setValidMoves] = useState([]);\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const [gameStatus, setGameStatus] = useState('waiting');\n  const [opponentConnected, setOpponentConnected] = useState(false);\n  const onUpdate = useCallback((newFen, newTurn, over, r) => {\n    if (newFen) setFen(newFen);\n    setTurn(newTurn);\n    setGameOver(over);\n    setReason(r);\n    setSelectedFrom(null);\n    setValidMoves([]);\n    setGameStatus(over ? 'finished' : newFen && newFen !== \"................................................................\" ? 'playing' : 'waiting');\n  }, []);\n  const {\n    connected,\n    playerColor,\n    sendMove\n  } = useChessSocket(roomId, onUpdate);\n  useEffect(() => {\n    if (connected && playerColor) {\n      setGameStatus('ready');\n    } else {\n      setGameStatus('waiting');\n    }\n  }, [connected, playerColor]);\n  useEffect(() => {\n    if (gameStatus === 'playing') setOpponentConnected(true);\n  }, [gameStatus]);\n  const board = useMemo(() => {\n    const parts = fen && fen.includes(\"/\") ? fen.split(\"/\") : [];\n    let rows = [];\n    if (parts.length === 8) rows = parts.map(row => row.split(\"\"));else if (fen.length >= 64) for (let i = 0; i < 8; i++) rows.push(fen.slice(i * 8, i * 8 + 8).split(\"\"));else rows = Array.from({\n      length: 8\n    }, () => Array(8).fill(\".\"));\n    return rows;\n  }, [fen]);\n  function idxToSquare(r, c) {\n    const file = String.fromCharCode(\"a\".charCodeAt(0) + c);\n    const rank = String(8 - r);\n    return `${file}${rank}`;\n  }\n  function handleSquareClick(r, c) {\n    const sq = idxToSquare(r, c);\n    if (gameStatus === 'waiting') return setErrorMsg(\"‚è≥ ƒêang ch·ªù k·∫øt n·ªëi...\");\n    if (gameStatus === 'ready' && !opponentConnected) return setErrorMsg(\"‚è≥ ƒêang ch·ªù ƒë·ªëi th·ªß tham gia...\");\n    if (gameOver) return setErrorMsg(\"üèÅ Tr·∫≠n ƒë·∫•u ƒë√£ k·∫øt th√∫c!\");\n    if (playerColor !== turn) return setErrorMsg(\"‚è±Ô∏è Ch∆∞a ƒë·∫øn l∆∞·ª£t c·ªßa b·∫°n!\");\n    if (!selectedFrom) {\n      const piece = board[r][c];\n      if (!ChessRules.isPlayerPiece(piece, playerColor)) {\n        return setErrorMsg(\"‚ùå H√£y ch·ªçn qu√¢n c·ªù c·ªßa b·∫°n!\");\n      }\n      setSelectedFrom(sq);\n      setErrorMsg(\"\");\n      const possible = [];\n      for (let toR = 0; toR < 8; toR++) {\n        for (let toC = 0; toC < 8; toC++) {\n          const toSq = idxToSquare(toR, toC);\n          const fromPos = ChessRules.notationToPosition(sq);\n          const toPos = ChessRules.notationToPosition(toSq);\n          if (fromPos && toPos) {\n            const validation = ChessRules.isValidMove(board, {\n              from: fromPos,\n              to: toPos\n            }, playerColor);\n            if (validation.valid) possible.push(toSq);\n          }\n        }\n      }\n      setValidMoves(possible);\n      return;\n    }\n    if (selectedFrom === sq) return setSelectedFrom(null), setValidMoves([]);\n    const fromPos = ChessRules.notationToPosition(selectedFrom);\n    const toPos = ChessRules.notationToPosition(sq);\n    if (!fromPos || !toPos) return setErrorMsg(\"‚ùå V·ªã tr√≠ kh√¥ng h·ª£p l·ªá!\");\n    const validation = ChessRules.isValidMove(board, {\n      from: fromPos,\n      to: toPos\n    }, playerColor);\n    if (!validation.valid) return setErrorMsg(validation.error || \"‚ùå N∆∞·ªõc ƒëi kh√¥ng h·ª£p l·ªá!\"), setSelectedFrom(null), setValidMoves([]);\n    const ok = sendMove(`${selectedFrom}${sq}`);\n    if (!ok) setErrorMsg(\"‚ö†Ô∏è Kh√¥ng th·ªÉ g·ª≠i n∆∞·ªõc ƒëi!\");\n    setSelectedFrom(null);\n    setValidMoves([]);\n    setErrorMsg(\"\");\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      fontFamily: \"sans-serif\",\n      maxWidth: 1100,\n      margin: \"0 auto\",\n      padding: 16\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 12\n      },\n      children: /*#__PURE__*/_jsxDEV(ConnectionStatus, {\n        gameStatus: gameStatus,\n        playerColor: playerColor,\n        roomId: roomId,\n        connected: connected,\n        opponentConnected: opponentConnected\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        gap: 20,\n        alignItems: \"flex-start\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: \"0 0 auto\",\n          width: 56 * 8,\n          boxShadow: \"0 6px 18px rgba(0,0,0,0.15)\",\n          borderRadius: 8,\n          overflow: \"hidden\",\n          background: \"#e6d8c4\",\n          padding: 8\n        },\n        children: /*#__PURE__*/_jsxDEV(BoardGrid, {\n          board: board,\n          selectedFrom: selectedFrom,\n          validMoves: validMoves,\n          handleSquareClick: handleSquareClick,\n          gameOver: !!gameOver\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: \"1 1 320px\",\n          maxWidth: 380\n        },\n        children: [/*#__PURE__*/_jsxDEV(GameInfo, {\n          turn: turn,\n          gameOver: gameOver,\n          reason: reason,\n          opponentConnected: opponentConnected,\n          playerColor: playerColor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 12,\n            padding: 12,\n            background: \"#fff\",\n            borderRadius: 8,\n            border: \"1px solid #e5e7eb\",\n            color: \"#000\"\n          },\n          children: [errorMsg ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#b91c1c\",\n              marginBottom: 8\n            },\n            children: errorMsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#111\",\n              marginBottom: 8\n            },\n            children: \"Kh\\xF4ng c\\xF3 l\\u1ED7i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {/* leave room handled elsewhere */},\n              style: {\n                padding: \"8px 12px\",\n                background: \"#ef4444\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: 6,\n                cursor: \"pointer\"\n              },\n              children: \"R\\u1EDDi ph\\xF2ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1,\n                alignSelf: \"center\",\n                color: \"#6b7280\"\n              },\n              children: [connected ? /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"#10b981\"\n                },\n                children: \"\\u25CF \\u0110\\xE3 k\\u1EBFt n\\u1ED1i\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 30\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"#f59e0b\"\n                },\n                children: \"\\u25CF \\u0110ang k\\u1EBFt n\\u1ED1i...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 87\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 6\n                },\n                children: [\"B\\u1EA1n: \", playerColor === \"white\" ? \"‚ö™ Tr·∫Øng\" : playerColor === \"black\" ? \"‚ö´ ƒêen\" : \"‚Äî\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n}\n// ...existing code...\n_s(Board, \"0j/3mxw4TgtT1cWsT5t8Yo5jQxU=\", false, function () {\n  return [useChessSocket];\n});\n_c = Board;\nvar _c;\n$RefreshReg$(_c, \"Board\");","map":{"version":3,"names":["React","useState","useMemo","useEffect","useCallback","BoardGrid","GameInfo","ConnectionStatus","useChessSocket","ChessRules","jsxDEV","_jsxDEV","Board","roomId","_s","fen","setFen","turn","setTurn","gameOver","setGameOver","reason","setReason","undefined","selectedFrom","setSelectedFrom","validMoves","setValidMoves","errorMsg","setErrorMsg","gameStatus","setGameStatus","opponentConnected","setOpponentConnected","onUpdate","newFen","newTurn","over","r","connected","playerColor","sendMove","board","parts","includes","split","rows","length","map","row","i","push","slice","Array","from","fill","idxToSquare","c","file","String","fromCharCode","charCodeAt","rank","handleSquareClick","sq","piece","isPlayerPiece","possible","toR","toC","toSq","fromPos","notationToPosition","toPos","validation","isValidMove","to","valid","error","ok","style","fontFamily","maxWidth","margin","padding","children","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","display","gap","alignItems","flex","width","boxShadow","borderRadius","overflow","background","marginTop","border","color","onClick","cursor","alignSelf","_c","$RefreshReg$"],"sources":["D:/LTM/CHESS/fe/src/components/Broad/Board.tsx"],"sourcesContent":["// ...existing code...\nimport React, { useState, useMemo, useEffect, useCallback } from \"react\";\nimport { BoardGrid } from \"./BoardGrid\";\nimport { GameInfo } from \"./GameInfo\";\nimport { ConnectionStatus } from \"./ConnectionStatus\";\nimport useChessSocket from \"../context/useChessSocket\";\nimport { ChessRules } from \"./chessRules\";\n\ntype BoardProps = { roomId: string };\n\nexport default function Board({ roomId }: BoardProps) {\n  const [fen, setFen] = useState<string>(\"................................................................\");\n  const [turn, setTurn] = useState<string>(\"white\");\n  const [gameOver, setGameOver] = useState<string | null>(null);\n  const [reason, setReason] = useState<string | undefined>(undefined);\n  const [selectedFrom, setSelectedFrom] = useState<string | null>(null);\n  const [validMoves, setValidMoves] = useState<string[]>([]);\n  const [errorMsg, setErrorMsg] = useState<string>(\"\");\n  const [gameStatus, setGameStatus] = useState<'waiting' | 'ready' | 'playing' | 'finished'>('waiting');\n  const [opponentConnected, setOpponentConnected] = useState<boolean>(false);\n\n  const onUpdate = useCallback((newFen: string, newTurn: string, over: string | null, r?: string) => {\n    if (newFen) setFen(newFen);\n    setTurn(newTurn);\n    setGameOver(over);\n    setReason(r);\n    setSelectedFrom(null);\n    setValidMoves([]);\n    setGameStatus(over ? 'finished' : (newFen && newFen !== \"................................................................\" ? 'playing' : 'waiting'));\n  }, []);\n\n  const { connected, playerColor, sendMove } = useChessSocket(roomId, onUpdate);\n\n  useEffect(() => {\n    if (connected && playerColor) {\n      setGameStatus('ready');\n    } else {\n      setGameStatus('waiting');\n    }\n  }, [connected, playerColor]);\n\n  useEffect(() => {\n    if (gameStatus === 'playing') setOpponentConnected(true);\n  }, [gameStatus]);\n\n  const board = useMemo(() => {\n    const parts = fen && fen.includes(\"/\") ? fen.split(\"/\") : [];\n    let rows: string[][] = [];\n    if (parts.length === 8) rows = parts.map(row => row.split(\"\"));\n    else if (fen.length >= 64)\n      for (let i = 0; i < 8; i++) rows.push(fen.slice(i * 8, i * 8 + 8).split(\"\"));\n    else rows = Array.from({ length: 8 }, () => Array(8).fill(\".\"));\n    return rows;\n  }, [fen]);\n\n  function idxToSquare(r: number, c: number): string {\n    const file = String.fromCharCode(\"a\".charCodeAt(0) + c);\n    const rank = String(8 - r);\n    return `${file}${rank}`;\n  }\n\n  function handleSquareClick(r: number, c: number) {\n    const sq = idxToSquare(r, c);\n\n    if (gameStatus === 'waiting') return setErrorMsg(\"‚è≥ ƒêang ch·ªù k·∫øt n·ªëi...\");\n    if (gameStatus === 'ready' && !opponentConnected) return setErrorMsg(\"‚è≥ ƒêang ch·ªù ƒë·ªëi th·ªß tham gia...\");\n    if (gameOver) return setErrorMsg(\"üèÅ Tr·∫≠n ƒë·∫•u ƒë√£ k·∫øt th√∫c!\");\n    if (playerColor !== turn) return setErrorMsg(\"‚è±Ô∏è Ch∆∞a ƒë·∫øn l∆∞·ª£t c·ªßa b·∫°n!\");\n\n    if (!selectedFrom) {\n      const piece = board[r][c];\n      if (!ChessRules.isPlayerPiece(piece, playerColor as 'white' | 'black')) {\n        return setErrorMsg(\"‚ùå H√£y ch·ªçn qu√¢n c·ªù c·ªßa b·∫°n!\");\n      }\n\n      setSelectedFrom(sq);\n      setErrorMsg(\"\");\n      const possible: string[] = [];\n      for (let toR = 0; toR < 8; toR++) {\n        for (let toC = 0; toC < 8; toC++) {\n          const toSq = idxToSquare(toR, toC);\n          const fromPos = ChessRules.notationToPosition(sq);\n          const toPos = ChessRules.notationToPosition(toSq);\n          if (fromPos && toPos) {\n            const validation = ChessRules.isValidMove(board, { from: fromPos, to: toPos }, playerColor as 'white' | 'black');\n            if (validation.valid) possible.push(toSq);\n          }\n        }\n      }\n      setValidMoves(possible);\n      return;\n    }\n\n    if (selectedFrom === sq) return setSelectedFrom(null), setValidMoves([]);\n\n    const fromPos = ChessRules.notationToPosition(selectedFrom);\n    const toPos = ChessRules.notationToPosition(sq);\n    if (!fromPos || !toPos) return setErrorMsg(\"‚ùå V·ªã tr√≠ kh√¥ng h·ª£p l·ªá!\");\n\n    const validation = ChessRules.isValidMove(board, { from: fromPos, to: toPos }, playerColor as 'white' | 'black');\n    if (!validation.valid) return setErrorMsg(validation.error || \"‚ùå N∆∞·ªõc ƒëi kh√¥ng h·ª£p l·ªá!\"), setSelectedFrom(null), setValidMoves([]);\n\n    const ok = sendMove(`${selectedFrom}${sq}`);\n    if (!ok) setErrorMsg(\"‚ö†Ô∏è Kh√¥ng th·ªÉ g·ª≠i n∆∞·ªõc ƒëi!\");\n    setSelectedFrom(null);\n    setValidMoves([]);\n    setErrorMsg(\"\");\n  }\n\n  return (\n    <div style={{ fontFamily: \"sans-serif\", maxWidth: 1100, margin: \"0 auto\", padding: 16 }}>\n      <div style={{ marginBottom: 12 }}>\n        <ConnectionStatus gameStatus={gameStatus} playerColor={playerColor} roomId={roomId} connected={connected} opponentConnected={opponentConnected} />\n      </div>\n\n      {/* Two-column layout: board left, info right */}\n      <div style={{ display: \"flex\", gap: 20, alignItems: \"flex-start\" }}>\n        {/* Left: board container */}\n        <div style={{\n          flex: \"0 0 auto\",\n          width: 56 * 8,\n          boxShadow: \"0 6px 18px rgba(0,0,0,0.15)\",\n          borderRadius: 8,\n          overflow: \"hidden\",\n          background: \"#e6d8c4\",\n          padding: 8\n        }}>\n          <BoardGrid\n            board={board}\n            selectedFrom={selectedFrom}\n            validMoves={validMoves}\n            handleSquareClick={handleSquareClick}\n            gameOver={!!gameOver}\n          />\n        </div>\n\n        {/* Right: info column */}\n        <div style={{ flex: \"1 1 320px\", maxWidth: 380 }}>\n          <GameInfo turn={turn} gameOver={gameOver} reason={reason} opponentConnected={opponentConnected} playerColor={playerColor} />\n\n          {/* Error / status and controls */}\n          <div style={{ marginTop: 12, padding: 12, background: \"#fff\", borderRadius: 8, border: \"1px solid #e5e7eb\", color: \"#000\" }}>\n            {errorMsg ? (\n              <div style={{ color: \"#b91c1c\", marginBottom: 8 }}>{errorMsg}</div>\n            ) : (\n              <div style={{ color: \"#111\", marginBottom: 8 }}>Kh√¥ng c√≥ l·ªói</div>\n            )}\n\n            <div style={{ display: \"flex\", gap: 8 }}>\n              <button\n                onClick={() => { /* leave room handled elsewhere */ }}\n                style={{\n                  padding: \"8px 12px\",\n                  background: \"#ef4444\",\n                  color: \"white\",\n                  border: \"none\",\n                  borderRadius: 6,\n                  cursor: \"pointer\"\n                }}\n              >\n                R·ªùi ph√≤ng\n              </button>\n\n              <div style={{ flex: 1, alignSelf: \"center\", color: \"#6b7280\" }}>\n                {connected ? <span style={{ color: \"#10b981\" }}>‚óè ƒê√£ k·∫øt n·ªëi</span> : <span style={{ color: \"#f59e0b\" }}>‚óè ƒêang k·∫øt n·ªëi...</span>}\n                <div style={{ marginTop: 6 }}>\n                  B·∫°n: {playerColor === \"white\" ? \"‚ö™ Tr·∫Øng\" : playerColor === \"black\" ? \"‚ö´ ƒêen\" : \"‚Äî\"}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n// ...existing code..."],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}